define("siteUtils/utils/mobileUtils",[],function(){"use strict";function c(c){var d,e=a,f=+c;return d=e>f?e:14>=f?f+1:25>=f?f:100>=f?b[f]:50}function d(a,b){var c=this.getMobileFontSize(a);return b*Math.round(c)}function e(){return a}var a=12,b={26:26,27:26,28:26,29:27,30:27,31:27,32:28,33:28,34:28,35:29,36:29,37:29,38:30,39:30,40:30,41:31,42:31,43:31,44:32,45:32,46:32,47:33,48:33,49:33,50:34,51:34,52:34,53:35,54:35,55:35,56:36,57:36,58:36,59:37,60:37,61:37,62:38,63:38,64:38,65:39,66:39,67:39,68:40,69:40,70:40,71:41,72:41,73:41,74:42,75:42,76:42,77:43,78:43,79:43,80:44,81:44,82:44,83:45,84:45,85:45,86:46,87:46,88:46,89:47,90:47,91:47,92:48,93:48,94:48,95:49,96:49,97:49,98:50,99:50,100:50};return{getMobileFontSize:c,convertFontSizeToMobile:d,getMinFontSize:e}}),define("siteUtils/core/MobileDeviceAnalyzer",["lodash"],function(a){"use strict";function e(a){switch(!0){case/(GT-S5300B|GT-S5360|GT-S5367|GT-S5570I|GT-S6102B|LG-E400f|LG-E400g|LG-E405f|LG-L38C|LGL35G)/i.test(a):return{width:240,height:320};case/(Ls 670|GT-S5830|GT-S5839i|GT-S6500D|GT-S6802B|GT-S7500L|H866C|Huawei-U8665|LG-C800|LG-MS695|LG-VM696|LGL55C|M865|Prism|SCH-R720|SCH-R820|SCH-S720C|SPH-M820-BST|SPH-M930BST|U8667|X501_USA_Cricket|ZTE-Z990G)/i.test(a):return{width:320,height:480};case/(5860E|ADR6300|ADR6330VW|ADR8995|APA9292KT|C771|GT-I8160|GT-I9070|GT-I9100|HTC-A9192|myTouch4G|N860|PantechP9070|PC36100|pcdadr6350|SAMSUNG-SGH-I727|SAMSUNG-SGH-I777|SAMSUNG-SGH-I997|SC-03D|SCH-I405|SCH-I500|SCH-I510|SCH-R760|SGH-S959G|SGH-T679|SGH-T769|SGH-T959V|SGH-T989|SPH-D700)/i.test(a):return{width:480,height:800};case/(DROIDX|SonyEricssonSO-02C|SonyEricssonST25i)/i.test(a):return{width:480,height:854};case/(DROID3|MB855)/i.test(a):return{width:540,height:960};case/F-05D/i.test(a):return{width:720,height:1280};default:return null}}function f(a){var c,d,e,f,b=a.match(/applewebkit\/([\d\.]+)/i);return b?(c=b[1].split("."),d=+(c[0]||0),e=+(c[1]||0),f=+(c[2]||0),1e4*d+100*e+f):NaN}function g(a){this.requestModel=a}var b=600,c=1280,d={MOBILE:"smartphone",TABLET:"tablet",DESKTOP:"desktop",OTHER:"other"};return g.prototype={isMobileDevice:function(){var c=a.result(this,"requestModel.deviceType.toLowerCase")===d.MOBILE;if(this.isWindowUnavailable())return c;var e=this.getScreenWidth();this.isLandscape()&&(e=this.getScreenHeight());var f=b>e,g=f&&(this.isTouchScreen()||this.isMSMobileDevice());return g},isTabletDevice:function(){if(this.isWindowUnavailable())return!(!this.requestModel||!this.requestModel.deviceType||this.requestModel.deviceType.toLowerCase()!==d.TABLET);var a=this.getScreenWidth();return this.isPortrait()&&(a=this.getScreenHeight()),!this.isMobileDevice()&&a>=b&&c>=a&&this.isTouchScreen()},getWindowScreenWidth:function(){return window.screen.width},getScreenWidth:function(){var a=this._getDeviceParamsByUserAgent();return a?a.width:NaN},getScreenHeight:function(){var a=this._getDeviceParamsByUserAgent();return a?a.height:NaN},isAppleMobileDevice:function(){return/iphone|ipod|ipad|Macintosh/i.test(this.requestModel.userAgent)},isMSMobileDevice:function(){return/iemobile/i.test(this.requestModel.userAgent)},isAndroidMobileDevice:function(){return/android/i.test(this.requestModel.userAgent)},cannotHideIframeWithinRoundedCorners:function(){return f(this.requestModel.userAgent)<537e4},isNewChromeOnAndroid:function(){if(this.isAndroidMobileDevice()){var a=this.requestModel.userAgent.toLowerCase();if(/chrome/i.test(a)){var b=a.split("chrome/"),c=b[1].split(" ")[0],d=c.split(".")[0],e=parseInt(d,10);if(e>=29)return!0}}return!1},isTouchScreen:function(){return this.isWindowUnavailable()?this.isMobileDevice()||this.isTabletDevice():!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)},isLandscape:function(){return!this.isPortrait()},isPortrait:function(){if(this.isWindowUnavailable())return!0;var a=window.orientation;return 0===a||180===a||this.isPortraitByScreenSize()},isPortraitByScreenSize:function(){return this.isWindowUnavailable()?!0:window.innerHeight>window.innerWidth},isAndroidOldBrowser:function(){var a=this.isNewChromeOnAndroid(),b=/opr/i.test(this.requestModel.userAgent);return this.isAndroidMobileDevice()&&!a&&!b},getDevicePixelRatio:function(){return this.isWindowUnavailable()?2:this.isMSMobileDevice()?Math.round(window.screen.availWidth/(window.screen.width||document.documentElement.clientWidth)):window.devicePixelRatio},getInitZoom:function(){return this.getScreenWidth()/document.body.offsetWidth},getZoom:function(){if(this.isWindowUnavailable())return 1;var a=this.getScreenWidth();return a/this.getWindowInnerWidth()},getMobileZoomByScreenProperties:function(){if(this.isWindowUnavailable())return 1;var a=1,b=this.getScreenDimensions(),c=Math.max(b.width,b.height),d=Math.min(b.width,b.height);return this.isMobileDevice()&&!this.isPortraitByScreenSize()&&(a=d/c),a},getSiteZoomRatio:function(){if(this.isWindowUnavailable())return 1;var a=320/window.screen.width;return a},getInvertedZoomRatio:function(){return this.isWindowUnavailable()?1:1/this.getZoom()},getOrientationZoomFixRation:function(){return this.getInitZoom()/this.getZoom()},getZoomRatioForNonOptimizedSites:function(){return this.isWindowUnavailable()?1:window.innerWidth/320},_getDeviceParamsByUserAgent:function(){if(this.isWindowUnavailable())return null;var c,d,a=this.requestModel.userAgent.toLowerCase(),b=e(a),f=this.getScreenDimensions();return b?(c=b.width,d=b.height):this.isPortrait()?(c=Math.min(f.width,f.height),d=Math.max(f.width,f.height)):(c=Math.max(f.width,f.height),d=Math.min(f.width,f.height)),/iemobile/i.test(a)&&(c=f.width||document.documentElement.clientWidth,d=f.height||document.documentElement.clientHeight),{width:c,height:d}},getScreenDimensions:function(){return this.isWindowUnavailable()?{width:0,height:0}:{width:window.screen.width,height:window.screen.height}},isWindowUnavailable:function(){return"undefined"==typeof window},getWindowInnerWidth:function(){return window.innerWidth}},g}),define("siteUtils/core/browserDetection",[],function(){"use strict";function a(a){if(!a)return{};var b={},c={},d=a.match(/Web[kK]it[\/]{0,1}([\d.]+)/),e=a.match(/(Android);?[\s\/]+([\d.]+)?/),f=!!a.match(/\(Macintosh\; Intel /),g=a.match(/(iPad).*OS\s([\d_]+)/),h=a.match(/(iPod)(.*OS\s([\d_]+))?/),i=!g&&a.match(/(iPhone\sOS)\s([\d_]+)/),j=a.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),k=a.match(/Windows Phone ([\d.]+)/),l=j&&a.match(/TouchPad/),m=a.match(/Kindle\/([\d.]+)/),n=a.match(/Silk\/([\d._]+)/),o=a.match(/(BlackBerry).*Version\/([\d.]+)/),p=a.match(/(BB10).*Version\/([\d.]+)/),q=a.match(/(RIM\sTablet\sOS)\s([\d.]+)/),r=a.match(/PlayBook/),s=a.match(/Chrome\/([\d.]+)/)||a.match(/CriOS\/([\d.]+)/),t=a.match(/Firefox\/([\d.]+)/),u=a.match(/MSIE\s([\d.]+)/)||a.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),v=!s&&a.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),w=v||a.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/),x=a.match(/Edge\/\d{2,}\.[\d\w]+$/);return c.webkit=d&&!x,c.webkit&&(c.version=d[1]),e&&(b.android=!0,b.version=e[2]),i&&!h&&(b.ios=b.iphone=!0,b.version=i[2].replace(/_/g,".")),g&&(b.ios=b.ipad=!0,b.version=g[2].replace(/_/g,".")),h&&(b.ios=b.ipod=!0,b.version=h[3]?h[3].replace(/_/g,"."):null),k&&(b.wp=!0,b.version=k[1]),j&&(b.webos=!0,b.version=j[2]),l&&(b.touchpad=!0),o&&(b.blackberry=!0,b.version=o[2]),p&&(b.bb10=!0,b.version=p[2]),q&&(b.rimtabletos=!0,b.version=q[2]),r&&(c.playbook=!0),m&&(b.kindle=!0,b.version=m[1]),n&&(c.silk=!0,c.version=n[1]),!n&&b.android&&a.match(/Kindle Fire/)&&(c.silk=!0),s&&!x&&(c.chrome=!0,c.version=s[1]),t&&!x&&(c.firefox=!0,c.version=t[1]),u&&(c.ie=!0,c.version=u[1]),w&&(f||b.ios)&&(c.safari=!0,f&&(c.version=w[1])),v&&(c.webview=!0),x&&(c.edge=!0),b.tablet=!!(g||r||e&&!a.match(/Mobile/)||t&&a.match(/Tablet/)||(u||x)&&!a.match(/Phone/)&&a.match(/Touch/)),b.phone=!(b.tablet||b.ipod||!(e||i||j||o||p||s&&a.match(/Android/)||s&&a.match(/CriOS\/([\d.]+)/)||t&&a.match(/Mobile/)||u&&a.match(/Touch/))),b.mac=f,{browser:c,os:b}}return a}),define("siteUtils/core/linkRenderer",["lodash","wixUrlParser","coreUtils","experiment"],function(a,b,c,d){"use strict";function i(a,b){if(d.isOpen("sv_dpages")){var e=w(b.url);if(!e&&!c.validationUtils.isValidUrl(b.url))return{};var g=e?a.publicBaseUrl+b.url:b.url;return{href:g,target:b.target||f,"data-content":g,"data-type":"external"}}return c.validationUtils.isValidUrl(b.url)?{href:b.url,target:b.target||f,"data-content":b.url,"data-type":"external"}:{}}function j(c,f,g){var i=f.pageId;if(!i)return{};var j=g||{pageId:i.id,title:i.pageUriSEO},k=b.getUrl(c,j),l={href:k,target:e};return d.isOpen("sv_popups")&&s(c,i.id)&&a.assign(l,{href:h,"data-no-physical-url":k}),l}function k(a,c){if(!c.routerId||!c.innerRoute)return{};var d={routerId:c.routerId,innerRoute:c.innerRoute},f=b.getUrl(a,d),g={href:f,target:e};return c.anchorDataId&&(g["data-anchor"]=c.anchorDataId),g}function l(a,b){return j(a,b)}function m(b,e,f){var n,g=a.clone(e),h=a.has(e.anchorDataId,"id")?e.anchorDataId.id:e.anchorDataId,i=a.includes(c.siteConstants.SAME_PAGE_SCROLL_ANCHORS,h),k=f.imageZoom,m=s(b,f.pageId);if(d.isOpen("wixCodeBinding")&&(i=i&&"masterPage"===e.pageId.id),i)if(k||m){var o=b.pagesDataItemsMap[b.primaryPageId];n=j(b,{pageId:o})}else n=j(b,g,f);else n=l(b,g);return m||(n["data-keep-roots"]=!0),n["data-anchor"]=h,n}function n(a){return{href:"tel:"+a.phoneNumber,"data-content":a.phoneNumber,"data-type":"phone"}}function o(a){var b="mailto:"+(a.recipient&&a.recipient.trim()||""),c=[];return a.subject&&c.push("subject="+a.subject),a.body&&c.push("body="+a.body),c.length>0&&(b+="?"+c.join("&")),{href:b,target:e,"data-content":a.recipient,"data-type":"mail"}}function p(b,d){var i,e=d.docId,g=/\.pdf$/i.test(e),h=b.serviceTopology.staticDocsUrl;return a.includes(e,"ugd/")&&a.includes(h,"/ugd")&&(e=e.substr(e.indexOf("ugd")+4)),i=h+"/"+e,g||(i+="?"+c.urlUtils.toQueryString({dn:d.name})),{href:i,target:f,"data-type":"document"}}function q(b,d){var j,k,l,f=d.postLoginUrl||"",h=d.postSignupUrl||"",i=d.dialog||"showLogin",m="",n={sendMail:"sendEmail",mailTemplate:"welcomeEmailTemplate",userColor:"userColor",loginCompName:"loginCompName"};return a.includes(h,"ifcontext")&&(l=c.urlUtils.parseUrl(h).query,a.forOwn(l,function(a,b){"ifcontext"===b.toLowerCase()&&(m=a.replace("#",""),h=/^[a-zA-Z0-9]+$/.test(m)?h.replace("{ifcontext}",m):h.replace("{ifcontext}","illegalContextValue"))})),c.wixUserApi.isSessionValid(b.cookie)?k=f:("createUser"===i&&(i="sign-up"),j={originUrl:b.currentUrl.full,postLogin:f,postSignUp:h,view:i},a.forEach(n,function(b,c){var e=d[c];a.isUndefined(e)||""===e||(j[b]=e)}),k=g+c.urlUtils.toQueryString(j)),{href:k,target:e}}function r(a,b){return{href:a.currentUrl.full,target:"_self","data-mobile":b.dataMobile}}function s(a,b){var c=a.pagesDataItemsMap[b];return c&&c.isPopup}function t(a){return!!a&&0===a.indexOf("mailto")}function u(a,c){if(!c)return!1;var d=b.utils.getResolvedSiteData(a),e=!!b.parseUrl(d,c),f=0===c.indexOf(d.serviceTopology.staticDocsUrl),g=c===h;return!(e||t(c)||f||g)}function v(a){return"PageLink"===a.type&&!a.pageId||"AnchorLink"===a.type&&!a.pageId||"AnchorLink"===a.type&&!a.anchorDataId||"DocumentLink"===a.type&&!a.docId||"DynamicPageLink"===a.type&&!a.routerId}function w(a){return a?"/"===a.charAt(0):!1}function x(a,b){var c=[];return a&&c.push("galleryId:"+a),b&&c.push("propertyQuery:"+b),c.join(" ")}var e="_self",f="_blank",g="https://users.wix.com/signin?",h="javascript:void()";return{renderLink:function(a,c,d){if(!a||v(a)||!d)return{};var e=b.utils.getResolvedSiteData(c);switch(a.type){case"PageLink":return l(e,a);case"ExternalLink":return i(e,a);case"AnchorLink":return m(e,a,d);case"LoginToWixLink":return q(e,a);case"EmailLink":return o(a);case"PhoneLink":return n(a);case"DocumentLink":return p(e,a);case"SwitchMobileViewMode":return r(e,a);case"DynamicPageLink":return k(e,a);default:return{}}},renderImageZoomLink:function(a,f,g,i,j){var k,l;if(c.nonPageItemZoom.shouldImageBeZoomedAsNonPageItem(g))l={onClick:function(){c.nonPageItemZoom.zoom(g)}};else{var m={pageId:f.pageId,pageItemId:g.id,title:g.title,imageZoom:!0},n=b.utils.getResolvedSiteData(a);k=b.getUrl(n,m),l={href:k,target:e},d.isOpen("sv_popups")&&s(n,m.pageId)&&(l.href=h,l["data-no-physical-url"]=k);var o=x(i,j);o&&(l["data-page-item-context"]=o)}return l},renderPageLink:function(a,c){var d=b.utils.getResolvedSiteData(c);return l(d,{pageId:a})},isExternalLink:u,isRelativeUrl:w,isEmailLink:t,getLinkUrlFromLinkProps:function(a){return a.href===h?a["data-no-physical-url"]:a.href},CONSTS:{LOGIN_TO_WIX_URL:g}}}),define("siteUtils/core/menuUtils",["lodash","siteUtils/core/linkRenderer","coreUtils","experiment","wixUrlParser"],function(a,b,c,d,e){"use strict";function f(d,e,f,g,h){if(!d)return d;if(a.isString(d))return{};var i=c.objectUtils.cloneDeep(d);return f&&(i.render=b.renderLink(i,h||e,g)),i}function g(a,c,d,e,f){var g={type:"PageLink",pageId:a};return d&&(g.render=b.renderLink(g,f||c,e)),g}function h(b,c){var d=b.getRouters(),e=!1;return a.forEach(d,function(b){a.includes(a.values(b.pages),c)&&(e=!0)}),e}function i(b,c,e,g,j,k,l){return a.reduce(b,function(b,m){var n=f(m.link,c,g,j,l);if(d.isOpen("sv_dpages")){var o=a.isObject(n.pageId)?n.pageId.id:n.pageId;o=a.startsWith(o,"#")?o.substring(1):o;var p="PageLink"===n.type?h(c,o):!1;if(!k&&p)return b}return(!e||e&&n&&"PageLink"===n.type)&&b.push({id:m.id,label:m.label,isVisible:m.isVisible,isVisibleMobile:m.isVisibleMobile,items:i(m.items,c,e,g,j,k,l),link:n}),b},[],this)}function j(b,c,d,e,f){var i,h=[];return a.forEach(b,function(a){i=c.getDataByQuery(a.refId),h.push({label:i.title,isVisible:!i.hidePage,isVisibleMobile:void 0!==i.mobileHidePage?!i.mobileHidePage:!i.hidePage,items:j(a.items,c,d,e,f),link:g(a.refId,c,d,e,f)})}),h}function k(b,c,d,f,g){var l,h=b.getDataByQuery("CUSTOM_MAIN_MENU"),k=b.getDataByQuery("MAIN_MENU");return d||(l=e.utils.getResolvedSiteData(b)),!h||k&&!a.isEmpty(k.items)?j(k.items,b,!d,f,l):i(h.items,b,c,!d,f,g,l)}function l(a,b,c){return k(a,b,!1,c)}function m(a,b,c){return k(a,b,!0,{},c)}function n(b){return a.reduce(b,function(a,b){return a>b?a:b},-(1/0))}function o(b){return a.filter(b,function(a){return 0!==a})}function p(b){return a.reduce(b,function(a,b){return b>a?a:b})}function q(b){var c=0;return a.reduce(m(b,null,!1),function(a,b){return b.isVisible&&(a.push(c.toString()),c++),a},[])}function r(b,c,d,e,f,g,h,i){if(b-=f*(h?e.length:e.length-1),b-=i.left+i.right,c&&a.fill(e,g),a.includes(e,0))return null;var j=0,k=a.reduce(e,function(a,b){return a+b},0);if(k>b)return null;if(c){if(d){var l=Math.floor(b/e.length),m=a.times(e.length,a.constant(l));if(j=l*e.length,b>j){var n=Math.floor(b-j);a.forEach(e,function(a,b){n-1>=b&&m[b]++})}return m}return e}if(d){var o=Math.floor((b-k)/e.length);j=0;var p=a.map(e,function(a){return j+=a+o,a+o});if(b>j){var q=Math.floor(b-j);a.forEach(e,function(a,b){q-1>=b&&p[b]++})}return p}return e}function s(b,c,d){var e=d.getCurrentUrlPageId(),f=b.getSiteAspect("anchorChangeEvent").getActiveAnchor();if(!f)return null;var g=f.activeAnchorComp.id,h=a(c).filter(function(b){return b.link&&a.isObject(b.link.anchorDataId)&&"AnchorLink"===b.link.type&&a.has(b.link.pageId,"id")&&b.link.pageId.id===e}).find({link:{anchorDataId:{id:g}}});return h?h.link.anchorDataId.id:null}function t(a){return a.browserFlags().highlightAnchorsInMenu}return{getDropDownWidthIfOk:r,getMaxWidth:n,getMinWidth:p,removeAllElementsWithWidthZero:o,nonHiddenPageIdsFromMainMenu:q,getSiteMenuWithRender:l,getSiteMenuWithoutRenderedLinks:m,getActiveAnchorInPage:s,shouldHighlightAnchorInPage:t}}),define("siteUtils/core/dataRefs.json",[],function(){return{Data:{BackgroundMedia:{mediaRef:!1,imageOverlay:!1},WixVideo:{posterImageRef:!1},Document:{mainPage:!1,pages:!1},Header:{image:!1},Image:{link:!1,originalImageDataRef:!1},Bgimagestrip:{originalImageDataRef:!1},StripContainer:{background:!1},ImageList:{items:!1},LinkList:{items:!1},AnchorLink:{anchorDataId:!0,pageId:!1},PageLink:{pageId:!1},MediaRichText:{linkList:!1,componentDataList:!1},MenuItem:{refId:!1},Page:{pageBackgrounds:{desktop:{ref:!1},mobile:{ref:!1}}},RichTextImage:{text:!1,image:!1},Service:{image:!1},ServiceList:{items:!1},BasicMenuItem:{link:!1,items:!1},CustomMenu:{items:!1},Menu:{items:!1},CustomMenusCollection:{menus:!1},MenuDataRef:{menuRef:!1},ImageButton:{link:!1,defaultImage:!1,hoverImage:!1,activeImage:!1},SubscribeForm:{link:!1},ContactForm:{link:!1},FlashComponent:{placeHolderImage:!1},LinkableFlashComponent:{link:!1,placeHolderImage:!1},LinkableButton:{link:!1},MenuData:{menuButton:!1,pages:!1},PermaLink:{dataItemRef:!1,correctPermaLinkRef:!1},SelectableList:{options:!1},StyledText:{linkList:!1},StyledTextLinkHelper:{link:!1},SvgShape:{link:!1},Table:{items:!1,header:!1,footer:!1},TPAWidget:{tpaData:!1},TPA:{tpaData:!1},TPASection:{tpaData:!1},TPAMultiSection:{tpaData:!1},RssButton:{image:!1,link:!1},AppPage:{pageBackgrounds:{desktop:{ref:!1},mobile:{ref:!1}}},StripContainerSlideShowSlide:{background:!1},ImageButtonWithText:{icon:!1}},Design:{MediaContainerDesignData:{background:!1},BackgroundMedia:{mediaRef:!1,imageOverlay:!1},WixVideo:{posterImageRef:!1},Image:{link:!1,originalImageDataRef:!1}},Properties:{ColumnProperties:{background:!1}}}}),define("siteUtils/customDataResolvers/imageDataResolver",["lodash"],function(a){"use strict";function c(c,d){var e={};c.link&&(e.link=d(c.link)),c.originalImageDataRef&&(e.originalImageDataRef=d(c.originalImageDataRef));var f=a.pick(d("IMAGE_QUALITY"),b);return a.isEmpty(c.quality)&&!a.isEmpty(f)&&(e.quality=f),a.isEmpty(e)?c:a.defaults(e,c)}var b=["quality","unsharpMask"];return{resolve:c}}),define("siteUtils/customDataResolvers/pageLinkDataResolver",["lodash"],function(a){"use strict";function b(b,c){return a.defaults({pageId:c(b.pageId,"masterPage")},b)}return{resolve:b}}),define("siteUtils/customDataResolvers/connectionListDataResolver",["lodash"],function(a){"use strict";function b(b){var c=a.map(a.get(b,"items"),function(b){return a.has(b,"config")?a.assign({},b,{config:JSON.parse(b.config)}):b});return a.assign({},b,{items:c})}return{resolve:b}}),define("siteUtils/customDataResolvers/appControllerDataResolver",["lodash"],function(a){"use strict";function b(b){return a.has(b,"settings")?a.assign({},b,{settings:JSON.parse(b.settings)}):b}return{resolve:b}}),define("siteUtils/customDataResolvers/customDataResolvers",["lodash","siteUtils/customDataResolvers/imageDataResolver","siteUtils/customDataResolvers/pageLinkDataResolver","siteUtils/customDataResolvers/connectionListDataResolver","siteUtils/customDataResolvers/appControllerDataResolver"],function(a,b,c,d,e){"use strict";return{Image:b,PageLink:c,ConnectionList:d,AppController:e}}),define("siteUtils/core/dataResolver",["lodash","siteUtils/core/dataRefs.json","siteUtils/customDataResolvers/customDataResolvers"],function(a,b,c){"use strict";function f(b,d,f,h,i){function l(a,b){b=b||d;var c="masterPage"===b?f:e;return g.call(k,h,f,c,b,i,a)}var j=a.get(c,[b.type,"resolve"]),k=this;return j(b,l)}function g(e,h,i,j,k,l,m){var n=b[d[k]],o=null;if(a.isPlainObject(l))return a.has(c,l.type)?o=f.call(this,l,j,h,e,k):(m=m||a.get(n,l.type,{}),o=a.mapValues(m,function(a,b){var c=g.call(this,e,h,i,j,k,l[b],a);return c||a!==!0?c:l[b]},this)),a.defaults(o,l);if(a.isArray(l))return a.map(l,function(a){return g.call(this,e,h,i,j,k,a)},this);a.startsWith(l,"#")&&(l=l.slice(1));var p=j;if(o=a.get(e,[j,"data",k,l]),!o&&(a.forEach(i,function(b){return o=a.get(e,[b,"data",k,l]),!o}),!o))return null;var q=this.readingFromCache&&a.get(this.cache,[p,k,l]);if(q)return q;if(a.has(c,o.type))o=f.call(this,o,j,h,e,k);else{if(m=m||a.get(n,o.type),!m)return o;o=a.assign({},o),a.forEach(m,function(b,c){if(a.has(o,c)){var d=g.call(this,e,h,i,j,k,o[c],b);!d&&b||(o[c]=d)}},this)}return a.set(this.cache,[p,k,l],o),o}function h(b,c,d,e,f){if(!a.has(b,[d,"data"]))return{};var h="masterPage"===d?c:["masterPage"];return g.call(this,b,c,h,d,e,f,null)}function i(){this.cache={},this.readingFromCache=!0}var d={component_properties:"Properties",document_data:"Data",design_data:"Design"},e=["masterPage"];return i.prototype={getDataByQuery:h,clearCache:function(){this.cache={}},setReadingFromCache:function(a){this.readingFromCache=Boolean(a)}},i}),define("siteUtils/core/pagesUrlUtils",["lodash","coreUtils","experiment"],function(a,b,c){"use strict";function d(c){return a.has(c,["publicModel","pageList"])?a(c.publicModel.pageList.pages).indexBy(function(e){return a.get(c,["urlFormatModel","pageIdToResolvedUriSEO",e.pageId,"curr"])||a.get(e,"pageUriSEO")||b.siteConstants.DEFAULT_PAGE_URI_SEO}).mapValues("pageId").value():{}}function e(b){return a.zipObject(b,a.times(b.length,a.constant(!0)))}function f(a){var d=a.urlFormatModel||{};c.isOpen("urlFormat")?d.format=b.siteConstants.URL_FORMATS.SLASH:d.format=d.format||b.siteConstants.URL_FORMATS.HASH_BANG,d.forbiddenPageUriSEOs=e(d.forbiddenPageUriSEOs||[]),d.pageIdToResolvedUriSEO=d.pageIdToResolvedUriSEO||{},a.urlFormatModel=d}function g(b,d){return d&&c.isOpen("pageListNewFormat")?a.map(b.topology,function(a){return a.baseUrl+a.parts.replace("{filename}",d)}):void 0}function h(b,c){var d=a.find(b.pages,{pageId:c});return d?g(b,d.pageJsonFileName)||d.urls:void 0}function i(a){return g(a,a.masterPageJsonFileName)||a.masterPage}return{ensureUrlFormatModel:f,getMapFromPageUriSeoToPageId:d,getPageURLs:h,getMasterPageURLs:i}}),define("siteUtils/core/constants",[],function(){"use strict";return{VIEW_MODES:{DESKTOP:"DESKTOP",MOBILE:"MOBILE"},DATA_TYPES:{data:"data",prop:"props",design:"design",theme:"style",behaviors:"behaviors",connections:"connections"},ACTION_TYPES:{CLICK:"click",DBL_CLICK:"dblclick",MOUSE_IN:"mouseenter",MOUSE_OUT:"mouseleave",CHANGE:"change",BLUR:"blur",FOCUS:"focus",IMAGE_CHANGED:"imageChanged",IMAGE_EXPANDED:"imageExpanded",CELL_SELECT:"cellSelect",CELL_EDIT:"cellEdit",ROW_SELECT:"rowSelect",AUTOPLAY_OFF:"autoplayOff",AUTOPLAY_ON:"autoplayOn",KEY_PRESS:"keyPress",SCREEN_IN:"screenIn"},BASE_PROPS_SCHEMA_TYPE:"DefaultProperties",COMP_IDS:{PAGE_GROUP:"SITE_PAGES",PAGES_CONTAINER:"PAGES_CONTAINER",HEADER:"SITE_HEADER",FOOTER:"SITE_FOOTER",BACKGROUND:"SITE_BACKGROUND"},POPUP:{POPUP_OVERLAY_CONTAINER:{STYLE_ID:"strc1",SKINPART_ID:"popupOverlayContainer",COMPONENT_TYPE:"wysiwyg.viewer.components.StripContainer",SKIN:"wysiwyg.viewer.skins.stripContainer.DefaultStripContainer",TYPE:"StripContainer"},POPUP_CONTAINER:{COMPONENT_TYPE:"wysiwyg.viewer.components.PopupContainer"}},ACTIVE_ANCHOR:{DELAY_TO_END_SCROLL:50},ANCHORS:{LOCK_THRESHOLD:70,LOCK_CONDITION:{ALWAYS:"always",NEVER:"never",THRESHOLD:"threshold"}}}}),define("siteUtils/core/browserFlags",[],function(){"use strict";return{create:function(a){var b=a.os,c=a.browser;return{highlightAnchorsInMenu:!(b.ipad&&c.chrome),fixedSiteBackground:!b.tablet&&!b.phone||b.ipad&&c.safari||(c.ie||c.edge)&&b.tablet,animateRevealScrubAction:c.ie||c.edge||c.firefox,animateParallaxScrubAction:c.edge,animateTinyMenuIcon:!(c.safari&&b.mac),preserve3DParallaxScrubAction:!(c.safari&&c.version>=9||c.firefox),fixedBackgroundColorBalata:c.chrome,forceOverflowScroll:b.iphone,shouldDisableSmoothScrolling:c.chrome||c.edge}}}}),define("siteUtils/core/SiteData",["lodash","dataFixer","coreUtils","siteUtils/core/MobileDeviceAnalyzer","siteUtils/core/menuUtils","siteUtils/core/browserDetection","wixUrlParser","siteUtils/core/dataResolver","siteUtils/core/pagesUrlUtils","siteUtils/core/constants","siteUtils/core/browserFlags","experiment"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function n(b){return l.isOpen("noDynamicModelOnFirstLoad")?a.get(this,["publicModel","sessionInfo",b]):this[b]}function o(b,c){l.isOpen("noDynamicModelOnFirstLoad")?this.publicModel&&a.set(this.publicModel,["sessionInfo",b],c):this[b]=c}function p(e){if(e){e.wixData&&b.deprecatedSiteModelMigrater(e),i.ensureUrlFormatModel(e),this.currentUrl={},this._currentRootInfos={},this._currentPageIds={primaryPage:null,popupPage:null},this.customUrlMapping={},a.assign(this,e),this.siteId=this.siteId||this.rendererModel&&this.rendererModel.siteInfo.siteId;var g=this.requestModel&&this.requestModel.userAgent,j=f(g),k=a.assign({},this.requestModel,e.publicModel&&e.publicModel.deviceInfo);this._isMobileView=e.forceMobileView,this._isTabletDevice=void 0,this.pagesData=this.pagesData||{},this.editorData={generated:{},generatedVersion:{}},this.textRuntimeLayout={overallBorders:{}},this.mapFromPageUriSeoToPageId=i.getMapFromPageUriSeoToPageId(e),this.dockedRuntimeLayout={},this.deletedPagesMap={},this.dataResolver=new h,this.orphanPermanentDataNodes=[],this.mobile=new d(k),this.browser=j.browser,this.os=j.os,this.wixBiSession=e.wixBiSession||{},this.svgShapes=e.svgShapes||{},this.activeModes={},this.prefetchPages=[],l.isOpen("sv_dpages")&&(this.routersRendererIndex=0),this.reLayoutedCompsMap={},this.renderFlags=this.renderFlags||{},a.defaults(this.renderFlags,{isPlayingAllowed:!0,isZoomAllowed:!0,isSocialInteractionAllowed:!0,siteTransformScale:1,isExternalNavigationAllowed:!0,isBackToTopButtonAllowed:!0,isWixAdsAllowed:!0,isSlideShowGalleryClickAllowed:!0,isTinyMenuOpenAllowed:!0,renderFixedPositionContainers:!0,isPageProtectionEnabled:this.isViewerMode(),isSiteMembersDialogsOpenAllowed:!0,allowSiteOverflow:!0,shouldResetGalleryToOriginalState:!1,shouldResetComponent:!0,extraSiteHeight:0,siteScale:1,shouldUpdateJsonFromMeasureMap:!0,componentViewMode:"preview",allowShowingFixedComponents:!0,componentPreviewStates:{},renderMobileActionMenu:!c.urlUtils.isQueryParamOn(this.currentUrl,"hideMobileActionBar"),initWixCode:this.isViewerMode()}),this.failedRequests=[],this.renderRealtimeConfig={},l.isOpen("noDynamicModelOnFirstLoad")||(this.svSession=c.cookieUtils.getCookie("svSession")),this._svQueue=[],this.compStates={},this.widgetsStore={},this.imageCssCache={},this.onImageUnmount=this.onImageUnmount.bind(this)}}var m="masterPage";return p.prototype={setStore:function(a){this.store=a,this.dataResolver&&this.store.registerDataLoadedCallback(this.dataResolver.clearCache.bind(this.dataResolver))},dataTypes:{PROPERTIES:"component_properties",DATA:"document_data",THEME:"theme_data",DESIGN:"design_data",BEHAVIORS:"behaviors_data",CONNECTIONS:"connections_data"},WIX_ADS_ID:"WIX_ADS",MASTER_PAGE_ID:m,setRootNavigationInfo:function(a,b){var c=a.pageId,d=c!==this._currentPageIds.primaryPage&&c!==this._currentPageIds.popupPage,e=l.isOpen("sv_popups")?this.isPopupPage(c):!1,f=!!a.routerDefinition;b&&(e||(this._currentPageIds.primaryPage=null),this._currentPageIds.popupPage=null),this._currentRootInfos[c]=a,l.isOpen("sv_dpages")&&f&&(this._currentRootInfos[c].routersRendererIndex=a.pageAdditionalData+this.routersRendererIndex,this.routersRendererIndex++),e?this._currentPageIds.popupPage=a.pageId:(this._currentRootInfos[m]=a,this._currentPageIds.primaryPage=a.pageId),l.isOpen("sv_popups")&&d&&this.dataResolver.clearCache()},addPrefetchPages:function(b){this.prefetchPages=a.union(this.prefetchPages,b)},getPrefetchPages:function(){return this.prefetchPages},getExistingRootNavigationInfo:function(b){return this._currentRootInfos[b]?a.omit(this._currentRootInfos[b],"transition"):void 0},getExistingRootNavigationInfoWithTransitionInfo:function(a){return this._currentRootInfos[a]},getPrimaryPageId:function(){return this._currentPageIds.primaryPage},getCurrentUrlPageId:function(){return this.getPrimaryPageId()},getFocusedRootId:function(){return l.isOpen("sv_popups")?this._currentPageIds.popupPage||this._currentPageIds.primaryPage:this.getPrimaryPageId()},getAllPossiblyRenderedRoots:function(){var a=[this.MASTER_PAGE_ID,this.getPrimaryPageId()];return this.isPopupOpened()&&a.push(this.getCurrentPopupId()),a},getRenderedRootsUnderMasterPage:function(){return a.reject(this.getAllPossiblyRenderedRoots(),this.isPopupPage,this)},getDataForCopy:function(){var b=a.clone(this);return delete b.store,b},isMobileView:function(){if(a.isUndefined(this._isMobileView)&&this.getMasterPageData())if(c.dataUtils.isMobileStructureExist(this.getMasterPageData())){var b=a(this.currentUrl.query).keys().find(function(a){return"showmobileview"===a.toLowerCase()});b?this._isMobileView="true"===this.currentUrl.query[b]:this._isMobileView=this.mobile.isMobileDevice()&&this.rendererModel.siteMetaData&&this.rendererModel.siteMetaData.adaptiveMobileOn}else this._isMobileView=!1;return this._isMobileView},isMobileDevice:function(){return a.isUndefined(this._isMobileDevice)&&(this._isMobileDevice=this.mobile.isMobileDevice()),this._isMobileDevice},browserFlags:function(){return this._browserFlags||(this._browserFlags=k.create(a.pick(this,["os","browser"]))),this._browserFlags},forceLandingPage:function(a){return a.query&&a.query.forceLandingPage},isTabletDevice:function(){return a.isUndefined(this._isTabletDevice)&&(this._isTabletDevice=this.os&&this.os.tablet&&!this.browser.ie||this.mobile.isTabletDevice()),this._isTabletDevice},isTouchDevice:function(){return this.isTabletDevice()||this.isMobileDevice()},setMobileView:function(a){this._isMobileView=a},getAllTheme:function(){return this.getMasterPageData().data.theme_data},getGeneralTheme:function(){return this.getMasterPageData().data.theme_data.THEME_DATA},getFont:function(a){var b=a.split("_")[1];return this.getGeneralTheme().font[b]},getColor:function(a){var b=a.split("_")[1];return this.getGeneralTheme().color[b]||a},getMasterPageData:function(){return this.pagesData.masterPage},getPageData:function(a){return this.pagesData[a]},getServiceTopologyProperty:function(a){return this.serviceTopology[a]},getStaticMediaUrl:function(){return this.serviceTopology.staticMediaUrl},getStaticVideoUrl:function(){return this.serviceTopology.staticVideoUrl},getStaticVideoHeadRequestUrl:function(){return this.serviceTopology.staticVideoHeadRequestUrl},getMetaSiteId:function(){return this.rendererModel.metaSiteId},getMediaFullStaticUrl:function(a){return c.urlUtils.getMediaUrlByContext(a,this.getStaticMediaUrl(),this.serviceTopology.mediaRootUrl)},getStaticThemeUrlWeb:function(){var a=this.serviceTopology.scriptsLocationMap;return a&&a.skins&&a.skins+"/images/wysiwyg/core/themes"},isPremiumDomain:function(){return a.includes(this.rendererModel.premiumFeatures,"HasDomain")},isPremiumUser:function(){return!a.isEmpty(this.rendererModel.premiumFeatures)},isAdFreePremiumUser:function(){return a.includes(this.rendererModel.premiumFeatures||[],"AdsFree")},getClientSpecMap:function(){return this.rendererModel.clientSpecMap},getClientSpecMapEntry:function(a){return this.rendererModel.clientSpecMap[a]},getClientSpecMapEntriesByType:function(b){return a.where(this.rendererModel.clientSpecMap,{type:b})},getClientSpecMapEntryByAppDefinitionId:function(b){return a.find(this.rendererModel.clientSpecMap,{appDefinitionId:b})},getSMToken:function(){var a=this.getClientSpecMapEntriesByType("sitemembers")[0]||{};return a.smtoken},getSvSession:function(){return n.call(this,"svSession")},getCTToken:function(){return n.call(this,"ctToken")},setCTToken:function(a){o.call(this,"ctToken",a)},subSvSession:function(a,b){var c=this.getSvSession();c||b?a(c):this._svQueue.push(a)},pubSvSession:function(a){o.call(this,"svSession",a),this._svQueue.forEach(function(b){b(a)}),this._svQueue.length=0},getUserId:function(){return this.siteHeader.userId},getSiteMetaData:function(){return this.rendererModel.siteMetaData},getSiteStructure:function(){return this.getDataByQuery(this.getStructureCompId())},getLanguageCode:function(){return this.rendererModel.languageCode},isPageLandingPage:function(a){var b=this.getDataByQuery(a);return this.forceLandingPage(this.currentUrl)?!0:b&&b.isLandingPage},getStructureCompId:function(){return"masterPage"},getBodyClientWidth:function(){return document.body.clientWidth},getBodyClientHeight:function(){return document.body.clientHeight},getScreenWidth:function(){return this.screenSize||this.updateScreenSize(),this.screenSize.width},getScreenHeight:function(){return this.screenSize||this.updateScreenSize(),this.screenSize.height},getScreenSize:function(){
return this.screenSize||this.updateScreenSize(),this.screenSize},updateScreenSize:function(){this.screenSize={width:this.isMobileView()?320:this.getBodyClientWidth(),height:this.getBodyClientHeight()}},getSiteX:function(){return this.isMobileView()||this.isMobileDevice()?0:Math.min(parseInt(Math.floor((this.getSiteWidth()-this.getScreenWidth())/2),10),0)},getSiteWidth:function(){if(this.isMobileView())return 320;if(this.isFacebookSite())return 520;var b=this.getSiteStructure();return a.get(b,"renderModifiers.siteWidth",980)},isFacebookSite:function(){return"HtmlFacebook"===this.rendererModel.siteInfo.applicationType},clearCache:function(){this.dataResolver.clearCache()},onImageUnmount:function(a){this.imageResizeHandlers&&delete this.imageResizeHandlers[a],this.imageCssCache&&delete this.imageCssCache[a]},getDataByQuery:function(a,b,c){b=b||"masterPage",c=c||this.dataTypes.DATA;var d=[this.getPrimaryPageId()];return l.isOpen("sv_popups")&&this.isPopupOpened()&&d.push(this.getCurrentPopupId()),this.dataResolver.getDataByQuery(this.pagesData,d,b,c,a)},isRootIgnoreBottomBottom:function(b){return b&&a.get(this.pagesData,["masterPage","data","document_data",b,"ignoreBottomBottomAnchors"])},resolveData:function(a,b,c){return this.getDataByQuery(a,b,c)},findDataOnMasterPageByPredicate:function(b){return a.find(this.getMasterPageData().data.document_data,b)},getPageMinHeight:function(){return this.isMobileView()?200:500},getCurrentUrlPageTitle:function(){var a=this.rendererModel.siteInfo.siteTitleSEO||"",b=this.getCurrentUrlPageId(),c=this.getDataByQuery(b),d=c.title||"",e=c.pageTitleSEO||"",f=this.isHomePage(b);return e?a=e:f||(a=a+" | "+d),a},isHomePage:function(a){return a&&a===this.getMainPageId()},getPagesDataItems:function(){var b=this.getAllPageIds(),c=a.map(b,function(a){return this.getDataByQuery(a)},this);return c},isDebugMode:function(){return"all"===a.get(this,["currentUrl","query","debug"])},getFavicon:function(){return this.publicModel&&this.publicModel.favicon},getExternalBaseUrl:function(){return this.getExternalBaseUrl=this.isViewerMode()?function(){return this.publicModel.externalBaseUrl}:function(){var a=7,b=c.urlUtils.getBaseUrlWithPath(document.location,a);return function(){return b}}(),this.getExternalBaseUrl()},getUnicodeExternalBaseUrl:function(){return this.publicModel&&this.publicModel.unicodeExternalBaseUrl},getMainPageId:function(){if(this.publicModel)return this.publicModel.pageList.mainPageId;var a=this.getDataByQuery("masterPage","masterPage");return a.mainPage.id||a.mainPageId||"mainPage"},getAllPageIds:function(){return this.publicModel?a.map(this.publicModel.pageList.pages,"pageId"):a.keys(a.omit(this.pagesData,["masterPage"]))},getPageTitle:function(b){if(this.publicModel){var c=a.get(this.publicModel,["pageList","pages"]);return a.get(a.find(c,{pageId:b}),"title")}return a.get(this.getDataByQuery(b),"title")},getPageSEOMetaData:function(a){var b={};a=this.getCurrentUrlPageId()||a,a&&"masterPage"!==a||(a=this.getMainPageId());var c=this.getDataByQuery(a);return c&&(b.description=c.descriptionSEO,b.keywords=c.metaKeywordsSEO,b.ogTags=c.metaOgTags),b},getBrowser:function(){return this.browser},getOs:function(){return this.os},getHubSecurityToken:function(){return n.call(this,"hs")||"NO_HS"},setHubSecurityToken:function(a){o.call(this,"hs",a)},getPageUsedFonts:function(a){var b=this.getDataByQuery(a);return b.usedFonts},setPageUsedFonts:function(a,b){var c=this.getDataByQuery(a);c.usedFonts=b},getPremiumFeatures:function(){return this.rendererModel.premiumFeatures},isViewerMode:function(){return!a.isUndefined(this.publicModel)},isTemplate:function(){return"Template"===this.rendererModel.siteInfo.documentType},shouldShowWixAds:function(){var b=this.rendererModel.siteInfo.documentType,c="Template"===b&&!this.rendererModel.previewMode,d=a.includes(this.rendererModel.premiumFeatures,"NoAdsInSocialSites");return this.renderFlags.isWixAdsAllowed&&!this.isAdFreePremiumUser()&&"WixSite"!==b&&!c&&(!this.isFacebookSite()||!d)},getMobileWixAdsHeight:function(){return this.isMobileView()&&this.shouldShowWixAds()?30:0},getPageBottomMargin:function(){return this.isMobileView()||!this.shouldShowWixAds()?0:40},isWixSite:function(){return"WixSite"===this.rendererModel.siteInfo.documentType},isUsingUrlFormat:function(a){return this.getUrlFormat()===a},getUrlFormat:function(){return this.urlFormatModel&&this.urlFormatModel.format?this.urlFormatModel.format:c.siteConstants.URL_FORMATS.HASH_BANG},isImageZoom:function(a){return a.imageZoom},getPageUrl:function(b,d,e,f,h){var i=this.isUsingUrlFormat(c.siteConstants.URL_FORMATS.HASH_BANG)?c.siteConstants.URL_FORMATS.HASH_BANG:d;return g.getUrl(this,a.assign({},b,{format:i}),!1,a.isUndefined(f)?!0:f,e,h)},getCurrentUrl:function(a,b,c){var d=this.getExistingRootNavigationInfo(this.getCurrentUrlPageId());return this.getPageUrl(d,a,b,void 0,c?this.customUrlMapping:void 0)},getMainPageUrl:function(a,b){return this.getPageUrl({pageId:this.getMainPageId()},a,b)},getMainPagePath:function(){var a=this.getMainPageUrl(this.getUrlFormat()),b=this.currentUrl.protocol+"//"+this.currentUrl.host;return a.replace(b,"")},getForbiddenPageUriSEOs:function(){return this.urlFormatModel&&this.urlFormatModel.forbiddenPageUriSEOs?this.urlFormatModel.forbiddenPageUriSEOs:{}},getPageIdFromPageUriSeo:function(b){return a.get(this.mapFromPageUriSeoToPageId,b)},getGlobalImageQuality:function(){return a.pick(this.getDataByQuery(c.siteConstants.GLOBAL_IMAGE_QUALITY),c.siteConstants.GLOBAL_IMAGE_QUALITY_PROPERTIES)},getCurrentPopupId:function(){return this._currentPageIds.popupPage},getRootNavigationInfo:function(){var a=this.getPrimaryPageId();return this.getExistingRootNavigationInfo(a)},isPopupPage:function(a){var b;return"masterPage"===a?!1:(b=this.getDataByQuery(a),Boolean(b&&b.isPopup))},isPopupOpened:function(){return Boolean(this.getCurrentPopupId())},getViewMode:function(){return this.isMobileView()?j.VIEW_MODES.MOBILE:j.VIEW_MODES.DESKTOP},isFeedbackEndpoint:function(){return!this.isViewerMode()&&a.startsWith(this.currentUrl.path,"/html/editor/review")},getPublicBaseUrl:function(){var a=!!this.documentServicesModel,b=a?this.documentServicesModel.isPublished:!0;return a?b?this.documentServicesModel.publicUrl:"":this.getExternalBaseUrl()},getPagesDataForRmi:function(){var b=!!this.documentServicesModel,c=b?this.documentServicesModel.isPublished:!0,d=function(a,b){return{title:a.label||"",fullUrl:c?this.getPageUrl({pageId:a.link.pageId.id,title:a.label},null,b,!1):"",url:"/"+a.link.pageId.pageUriSEO,visible:a.isVisible,id:a.link.pageId.id}},f={pagesData:{},currentPageId:this.getPrimaryPageId(),baseUrl:""};f.baseUrl=this.getPublicBaseUrl();var g=e.getSiteMenuWithoutRenderedLinks(this,!1),h=a.filter(g,function(a){return a.link&&a.link.pageId});return f.pagesData=a.map(h,function(b){var c=d.call(this,b,f.baseUrl),e=b.items;return a.forEach(e,function(a){var b=d.call(this,a,f.baseUrl);c.childPages||(c.childPages=[]),c.childPages.push(b)},this),c},this),f},setCustomUrlMapping:function(a,b){this.customUrlMapping[a]=b},addDynamicPageData:function(a,b){this.dynamicPageData||(this.dynamicPageData={}),this.dynamicPageData[a]||(this.dynamicPageData[a]={}),this.dynamicPageData[a]=b},getDynamicPageData:function(a){return this.dynamicPageData?this.dynamicPageData[a||this.getPrimaryPageId()]:null},getRouters:function(){return a.get(this,"rendererModel.routers.configMap")},isQaMode:function(){return c.urlUtils.isQueryParamOn(this.currentUrl,"isqa")}},p}),define("siteUtils/core/pageRequests",["lodash","coreUtils","loggingUtils","dataFixer","siteUtils/core/pagesUrlUtils","experiment"],function(a,b,c,d,e,f){"use strict";function h(b,c){return a.some(b.failedRequests,function(b){var d=b.destination;return 2===a.size(d)&&"pagesData"===d[0]&&d[1]===c})}function i(a,b){c.logger.reportBI(a,c.bi.errors.ALL_PAGE_RETRIEVAL_ATTEMPTS_FAILED,{pageId:b})}function j(a,b){var c=e.getMasterPageURLs(b);return p(a,c,g,b)}function k(b,c){return function(e){return d.fix(e,a.pluck(c.pages,"pageId"),b.requestModel,b.currentUrl,b.urlFormatModel,b.isViewerMode())}}function l(a,b,c){if(a.currentUrl&&a.currentUrl.query.fakePage){var d=a.currentUrl.query.fakePage;return{urls:[a.santaBase+"/static/fakePages/"+d+".json"],destination:["pagesData",c],transformFunc:k(a,b)}}var f=e.getPageURLs(b,c);return f||(c=b.mainPageId,f=e.getPageURLs(b,b.mainPageId)),p(a,f,c,b)}function p(d,e,g,h){m&&(e[0]=e[0].replace(n,o));var i={urls:e,destination:["pagesData",g],isValidResponse:function(b){return a.isObject(b)},transformFunc:k(d,h),error:function(){d.failedRequests.push(this)},onUrlRequestFailure:function(a,e){var f=b.urlUtils.parseUrl(a);c.logger.reportBI(d,c.bi.errors.SINGLE_PAGE_RETRIEVAL_ATTEMPT_FAILED,{pageId:g,hostname:f.hostname,url:a,responseStatusCode:e})}};return f.isOpen("pageRequestTimeout")&&a.merge(i,{maxTimeouts:1,requestTimeout:2e3,ontimeout:function(){c.logger.reportBeatEvent(d,"reset",g)}}),i}function q(b,c,d){if(!b.publicModel)return[];var e=[],f=b.publicModel.pageList;h(b,g)?i(b,g):c.pagesData[g]||e.push(j(b,f));var k=a.isArray(d)?d:[d];return a.forEach(k,function(a){a.pageId&&(h(b,a.pageId)?i(b,a.pageId):s(b,a)?e.push(p(b,a.jsonUrls,a.pageId,f)):r(b,a)||c.pagesData[a.pageId]||e.push(l(b,f,a.pageId)))}),e}function r(b,c){var d=a.get(b,"rendererModel.passwordProtectedPages",[]);return a.includes(d,c.pageId)}function s(b,c){var d=a.find(b.publicModel.pageList.pages,{pageId:c.pageId});return!a.isEmpty(c.jsonUrls)&&a.isEmpty(a.get(d,"urls"))}var g="masterPage",m="undefined"!=typeof document&&"https:"===document.location.protocol,n=/http:\/\/[a-z]+\.[a-z]+\.com\//,o="//static.wixstatic.com/";return q}),define("siteUtils/core/componentsAnchorsMetaData",["siteUtils/core/constants","experiment"],function(a,b){"use strict";return{"default":{to:{allow:!0},from:{allow:!0,lock:a.ANCHORS.LOCK_CONDITION.THRESHOLD}},"wysiwyg.viewer.components.Column":{to:{allow:!0},from:{allow:!1,lock:a.ANCHORS.LOCK_CONDITION.NEVER}},"wysiwyg.viewer.components.PageGroup":{to:{allow:!0},from:{allow:!0,lock:a.ANCHORS.LOCK_CONDITION.ALWAYS}},"mobile.core.components.Page":{to:{allow:!0},from:{allow:!1,lock:a.ANCHORS.LOCK_CONDITION.NEVER}},"wysiwyg.viewer.components.PagesContainer":{to:{allow:!0},from:{allow:!0,lock:b.isOpen("viewerGeneratedAnchors")?a.ANCHORS.LOCK_CONDITION.THRESHOLD:a.ANCHORS.LOCK_CONDITION.ALWAYS}},"wysiwyg.viewer.components.PopupContainer":{to:{allow:!0},from:{allow:!1}},"wysiwyg.viewer.components.SiteSegmentContainer":{to:{allow:!0},from:{allow:!0,lock:a.ANCHORS.LOCK_CONDITION.ALWAYS}},"wysiwyg.viewer.components.WSiteStructure":{to:{allow:!0,distance:0},from:{allow:!1,lock:a.ANCHORS.LOCK_CONDITION.NEVER}},"wysiwyg.viewer.components.tpapps.TPASection":{to:{allow:!0},from:{allow:!0,lock:a.ANCHORS.LOCK_CONDITION.NEVER}},"wysiwyg.viewer.components.tpapps.TPAMultiSection":{to:{allow:!0},from:{allow:!0,lock:a.ANCHORS.LOCK_CONDITION.NEVER}},"wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton":{from:{allow:!1}},"wysiwyg.viewer.components.tpapps.TPAGluedWidget":{from:{allow:!1}},"wixapps.integration.components.AppPage":{from:{allow:!1}},"platform.components.AppController":{to:{allow:!1},from:{allow:!1}}}}),define("siteUtils/core/layoutUtils",["lodash","coreUtils"],function(a,b){"use strict";function c(a){return a&&a.docked&&(a.docked.vCenter||a.docked.bottom||a.docked.top)}function d(a){return a&&a.docked&&(a.docked.hCenter||a.docked.left||a.docked.right)}function e(a,b){return parseFloat((b/a).toFixed(5))}function f(b){return!a.isUndefined(b.aspectRatio)}function g(a,b){return Boolean(a&&a.docked&&a.docked[b])}function h(a,b){return a&&a.docked&&a.docked[b]}function i(a){return Boolean(a&&a.docked&&a.docked.bottom&&a.docked.top)}function j(a){return a&&a.docked&&a.docked.left&&a.docked.right}function k(a,b,c){return a&&Math.max(b,Math.min(c,a))}function l(){return{top:"",bottom:"",left:"",right:"",width:"",height:"",position:""}}function m(a,e,f,g,h){var m=l();if(m.position=a&&a.position||"absolute",a){if(d(a)||(m.left=a.x),c(a)||(m.top=a.y),i(a)||(m.height=k(a.height,b.siteConstants.COMP_SIZE.MIN_HEIGHT,b.siteConstants.COMP_SIZE.MAX_HEIGHT)),j(a)||(m.width=k(a.width,b.siteConstants.COMP_SIZE.MIN_WIDTH,b.siteConstants.COMP_SIZE.MAX_WIDTH)),a.fixedPosition&&(m.position="fixed"),a.rotationInDegrees){var n=b.style.getPrefixedTransform();m[n]="rotate("+a.rotationInDegrees+"deg) translateZ(0)"}a.docked&&b.dockUtils.applyDockedStyle(a,m,e,f,g,h)}return m}function n(a,c,d){var e=c[d.id];return b.boundingLayout.getBoundingLayout({x:e.offsetLeft,y:e.offsetTop,width:r(a.width[d.id],e.offsetWidth),height:r(a.height[d.id],e.offsetHeight),rotationInDegrees:d.layout.rotationInDegrees})}function o(b,c,d,e,f){return a(d).reject({layout:{fixedPosition:!0}}).filter(function(a){return!!c[a.id]}).reduce(function(a,d){var g=n(b,c,d),h=f+g.y,i=h+g.height,j=e?o(b,c,d.components,e,h):i;return Math.max(a,i,j)},0)}function p(a,b){return a.isMobileView()?b.structure.mobileComponents:b.structure.components}function q(a,b,c,d){return o(a,b,p(c,d),!1,0)}function r(b,c){return a.isNumber(b)?b:c}function s(a,b,c){return r(a.width["ROOT_"+b],c)}function t(a,b,c){return r(a.left["ROOT_"+b],-c)}function u(a,b){var c=a-b;return{left:Math.floor(Math.min(0,.5*c)),width:Math.floor(Math.max(a,b))}}return{isVerticallyDocked:c,isDockedToDirection:g,getDockToDirection:h,isVerticallyStretched:i,isHorizontallyDocked:d,isHorizontallyStretched:j,isAspectRatioOn:f,calcAspectRatio:e,getStyle:m,getRootLeft:t,getRootWidth:s,getPageBottomChildEnd:q,stretchInCenteredContainer:u}}),define("siteUtils/core/skinAnchorsMetaData",["lodash"],function(a){"use strict";function c(c,d){return a.isFunction(b[c])?b[c](d):b[c]||0}var b={"wysiwyg.viewer.skins.area.BubbleArea":30,"wysiwyg.viewer.skins.area.BubbleLeftArea":30,"wysiwyg.viewer.skins.area.RibbonAreaSkin":function(b){var c=a.get(b,"style.properties"),d=10;return c&&(d+=parseInt(c.els,10)||0),d},"wysiwyg.viewer.skins.area.SloopyArea":6,"wysiwyg.viewer.skins.area.BubbleAreaLeft":10,"wysiwyg.viewer.skins.area.LeftTriangleArea":5,"wysiwyg.viewer.skins.area.RightTriangleArea":5,"wysiwyg.viewer.skins.area.BubbleAreaRight":10,"wysiwyg.viewer.skins.page.SloopyPageSkin":3,"wysiwyg.viewer.skins.page.BasicPageSkin":20,"wysiwyg.viewer.skins.page.LiftedBottomPageSkin":20,"wysiwyg.viewer.skins.page.LiftedTopPageSkin":20,"wysiwyg.viewer.skins.page.BorderPageSkin":20,"wysiwyg.viewer.skins.page.LiftedShadowPageSkin":20,"wysiwyg.viewer.skins.page.ShinyIPageSkin":20};return{getNonAnchorableHeightForSkin:c}}),define("siteUtils/core/anchorsGenerator",["lodash","experiment","siteUtils/core/constants","coreUtils","siteUtils/core/layoutUtils","siteUtils/core/skinAnchorsMetaData","siteUtils/core/componentsAnchorsMetaData"],function(a,b,c,d,e,f,g){"use strict";function q(a,b){var c=d.boundingLayout.getBoundingY(b),e=c+d.boundingLayout.getBoundingHeight(b),f=d.boundingLayout.getBoundingY(a),g=d.boundingLayout.getBoundingHeight(a),h=f+g,i=f+g/2;return e>h&&c>i}function r(a,b,c){var e=a.layout,f=b.layout,g=d.boundingLayout.getBoundingY(f),h=g-d.boundingLayout.getBoundingY(e)-d.boundingLayout.getBoundingHeight(e),i=c?0:g;v(o.bottomTop,a.componentType,a.id,b.id,h,i)}function s(a,b){var c=a.layout,e=b.layout,f=d.boundingLayout.getBoundingY(e)-d.boundingLayout.getBoundingY(c);v(o.topTop,a.componentType,a.id,b.id,f,d.boundingLayout.getBoundingY(e))}function t(b,c){if("masterPage"===c.id)return v(o.bottomParent,b.componentType,b.id,c.id,0,0);var e,g=c.layout,h=c.styleId&&c.styleId.replace("#",""),i=n[h],j=i&&i.skin||c.skin,m=b.layout,p=d.boundingLayout.getBoundingY(m),q=d.boundingLayout.getBoundingHeight(m),r=g.height-f.getNonAnchorableHeightForSkin(j,i),s=a.includes(k,c.type)||a.includes(l,c.componentType),t=r;return e=s?0:r-(p+q),v(o.bottomParent,b.componentType,b.id,c.id,e,t)}function u(a,b,c,d){return{distance:0,locked:!0,originalValue:d,fromComp:b,targetComponent:c,type:a}}function v(a,b,c,d,e,f){var g=u(a,c,d,f);g.distance=e,g.locked=w(a,b,e);var h=m[c];h.push(g)}function w(a,b,d){if(a===o.topTop)return!0;var e=g[b]||g["default"];return e.from.lock===c.ANCHORS.LOCK_CONDITION.NEVER?!1:e.from.lock===c.ANCHORS.LOCK_CONDITION.ALWAYS?!0:d<=c.ANCHORS.LOCK_THRESHOLD}function x(c){return b.isOpen("layout_verbs_with_anchors")?a.includes(j,c.id)||!(a.includes(h,c.id)||c.layout.fixedPosition||e.isVerticallyStretched(c.layout)):a.includes(j,c.id)||!(a.includes(h,c.id)||c.layout.fixedPosition||e.isVerticallyDocked(c.layout))}function y(b,c){return a(b).map(function(b){return a.map(c[b],"target")}).flatten().value()}function z(b){for(var c=y(i,b),d={};c.length;){var e=c.shift();d[e]=!0;var f=a(b[e]).map("target").reject(function(b){return a.has(d,b)}).value();c=c.concat(f)}return d}function A(b,c,d){var e=z(b);a.forEach(b,function(b,f){if(b.length){var g=c[f];a.forEach(b,function(a){if(a.target===p)return void t(g,d);var b=c[a.target];a.type===o.bottomTop?r(g,b,e[b.id]):s(g,b)})}})}function B(b,c){m={};var e={},f=d.dataUtils.getChildrenData(b,c);if(a.isEmpty(f))return m;C(f)&&(f=D(f)),a.forEach(f,function(a){e[a.id]=a,m[a.id]=[]});var g=a.filter(f,x),h=I(g,e);return A(h,e,b),m}function C(b){var c=a.find(b,{id:"SITE_HEADER"});if(!c)return!1;var d=a.find(b,{id:"PAGES_CONTAINER"});return d.layout.y<c.layout.y+c.layout.height}function D(b){var c=a.clone(b),d=a.find(b,{id:"SITE_HEADER"}),e=a.find(b,{id:"SITE_FOOTER"}),f=d.layout.y+d.layout.height,g=a.findIndex(b,{id:"PAGES_CONTAINER"}),h=b[g],i=a.assign({},h.layout,{y:f,height:e.layout.y-f});return c[g]=a.assign({},h,{layout:i}),c}function E(b,c){var d=[];a.forEach(b,function(b,e){var f=a(c[e]).filter({type:o.bottomTop}).map("source").value();d=d.concat(f)}),a.forEach(d,function(a){delete b[a]})}function F(b,c){return a.omit(b,function(b,d){return a.some(c[d],{type:o.bottomTop})})}function G(c){if(c.componentType){var d=a.get(g,[c.componentType,"to","allow"]);if(d===!1)return!1}return b.isOpen("layout_verbs_with_anchors")?!e.isDockedToDirection(c.layout,"top"):!0}function H(c){if(c.componentType){var d=a.get(g,[c.componentType,"from","allow"]);if(d===!1)return!1}return b.isOpen("layout_verbs_with_anchors")?!e.isDockedToDirection(c.layout,"bottom"):!0}function I(b,c){function m(b,c){a.isEmpty(c)||(b.id===p?c=F(c,d):E(c,e),a.forEach(c,function(a,c){d[c].push({target:b.id,type:a}),e[b.id].push({source:c,type:a})}))}var d={},e={},f=a.sortBy(b,"layout.y"),g={left:-1e5,right:1/0,ids:["root"]};f=J(f),d.root=[];var i,j,k,l,h=[g];return a.forEach(f,function(b){function v(a){"root"===a?q[a]=o.bottomTop:q[a]=K(c[a],b)}d[b.id]=[],e[b.id]=[],i=b.layout.x,j=i+b.layout.width,k=null,l=0;var s,t,u,f=G(b),g=H(b),n=h.length,p=[],q={},r=[];for(u=0;n>u;u++){var w=h[u];if(w.right<=i)p.push(w);else if(null===k?(k=u,s=!0):s=!1,(h.length-1===u||h[u+1].left>j)&&(l=u,t=!0),f&&a.forEach(w.ids,v),g&&(r=M(b.id,r,w,q,s,t,i,j,f)),t)break}if(delete q.root,m(b,q),g){var x=a.takeRight(h,n-l-1);h=a.compact(p).concat(r,x)}}),delete d.root,d}function J(a){var b={layout:{x:-1e5,y:1/0,height:10,width:1/0},id:p};return a.concat(b)}function K(a,b){var c=q(a.layout,b.layout);return c?o.bottomTop:o.topTop}function L(a,c){return b.isOpen("layout_verbs_with_anchors")?!c||a===o.topTop:a===o.topTop}function M(b,c,d,e,f,g,h,i,j){var k=a.clone(c);f&&k.push({ids:d.ids,left:d.left,right:h-1});var l={ids:[b],left:Math.max(h,d.left),right:Math.min(i,d.right)};a.forEach(d.ids,function(a){L(e[a],j)&&l.ids.push(a)});var m=a.last(k);return m&&!a.isEqual(m.ids,l.ids)?k.push(l):m&&(m.right=l.right),g&&k.push({ids:d.ids,left:i+1,right:d.right}),k}function N(b,c,e){for(var g,h,i,f=[b],j={};f.length;)g=f.pop(),i=O(g,c,e),a.assign(j,i),h=d.dataUtils.getChildrenData(g,e),Array.prototype.push.apply(f,h);return j}function O(a,b,c){return n=b,B(a,c)}function P(b,c,d,e,f){var g=!1,h=e-d;return 0>h?!1:(a.forEach(b,function(b){if(b.locked&&(b.type===o.bottomTop||b.type===o.bottomParent)){var d=a.get(f,[b.type,b.targetComponent]),e=d+h;if(a.isNaN(e))return void(g=!0);b.distance!==e&&(g=!0,b.distance=e,b.originalValue=c+e,b.locked=w(b.type,null,e))}}),g)}var m,n,h=["BACK_TO_TOP_BUTTON"],i=["PAGES_CONTAINER"],j=["SITE_HEADER","SITE_FOOTER","PAGES_CONTAINER"],k=["Page","Document"],l=["wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StripContainerSlideShow"],o={bottomTop:"BOTTOM_TOP",bottomParent:"BOTTOM_PARENT",topTop:"TOP_TOP"},p="parentNode";return{createPageAnchors:N,createChildrenAnchors:O,packTextAnchors:P}}),define("siteUtils/core/layoutAnchorsUtils",["lodash","experiment","siteUtils/core/anchorsGenerator","siteUtils/core/skinAnchorsMetaData"],function(a,b,c,d){"use strict";function e(b,c){var d,e="Document"===b.type;return d=e?c?"mobileComponents":"children":c?"mobileComponents":"components",a.first(b[d])}function f(a,c,d){if(b.isOpen("viewerGeneratedAnchors")){if(window.publicModel)return d&&(!c&&a.isPagePackedDesktop||c&&a.isPagePackedMobile);var f=e(a,c);return f&&!f.layout.anchors}return!1}return{createPageAnchors:c.createPageAnchors,createChildrenAnchors:c.createChildrenAnchors,packTextAnchors:c.packTextAnchors,shouldCreateAnchorsForPage:f,getNonAnchorableHeightForSkin:d.getNonAnchorableHeightForSkin}}),define("siteUtils/core/originalValuesMapGenerator",["lodash","coreUtils","siteUtils/core/skinAnchorsMetaData"],function(a,b,c){"use strict";function d(d,e,f){function h(d){var i=b.dataUtils.getChildrenData(d,f),j={};if(d.layout&&(j.top=b.boundingLayout.getBoundingY(d.layout)),!a.isEmpty(i)){if(d.layout){var k=d.styleId&&d.styleId.replace("#",""),l=e[k],m=l&&l.skin||d.skin;j.height=d.layout.height-c.getNonAnchorableHeightForSkin(m,l)}a.forEach(i,h)}g[d.id]=j}var g={};return h(d),g}return{createOriginalValuesMap:d}}),define("siteUtils/core/modesUtils",["lodash","coreUtils"],function(a,b){"use strict";return{getActiveComponentModeIds:function(c,d){var e=a.pluck(d,"modeId"),f=a.pick(c,e),g=f,h=a.find(d,{type:b.siteConstants.COMP_MODES_TYPES.DEFAULT});return a.isEmpty(f)&&h&&(g[h.modeId]=!0),g}}}),define("siteUtils/core/fullToDisplayedJson",["lodash","coreUtils","siteUtils/core/modesUtils","experiment"],function(a,b,c,d){"use strict";function e(b,c){var d=!0;if(b){var e=!b.isHiddenByModes,f=c&&!a.isUndefined(c.isHiddenByModes);d=f?!c.isHiddenByModes:e}return d}function f(b,c){return b=b||{},a.omit(b[c],function(a){return!a})}function g(b,c){return!a.isEmpty(c)&&a.every(b.modeIds,function(a){return c[a]})}function h(b,c){var e=d.isOpen("partialProperties"),f=a.transform(b,function(b,d){g(d,c)&&(e?a.assign(b,a.omit(d,"propertyQuery")):a.assign(b,d))},{});return delete f.modeIds,f}function i(a,b){var c=b&&a.mobileComponents?"mobileComponents":"children";return a[c]?c:"components"}function j(c,d,f){var g=i(d,f),k=d.modes,l=a.get(d,["modes","overrides"]),m=h(l||[],c,d);if(e(k,m)){var n=b.objectUtils.cloneDeep(a.omit(d,["modes",g]));return k&&(k.overrides&&(m=a.omit(m,"isHiddenByModes"),a.assign(n,m)),k.definitions&&a.set(n,["modes","definitions"],k.definitions)),a.isUndefined(d[g])||(n[g]=a(d[g]).map(function(a){return j(c,a,f)}).compact().value()),n}}function k(c,e,f){var g=b.objectUtils.cloneDeep(f),h=d.isOpen("partialProperties"),i=d.isOpen("partialDesigns");if(!h&&!i)return g;if(!a.isEmpty(e)&&c&&f)for(var j=[c];!a.isEmpty(j);){var k=j.pop(),p=k.modes||{},q=g.component_properties[k.propertyQuery],r=g.design_data[m(k.designQuery)];if(o(p.overrides,q,r,f,e),h&&k.propertyQuery&&(g.component_properties[k.propertyQuery]=q,l(g,f,"component_properties",k.propertyQuery)),i&&k.designQuery){var s=m(k.designQuery);g.design_data[s]=r,l(g,f,"design_data",s)}j=j.concat(n(k))}return g}function l(b,c,d,e){var f=c[d][e];a.forEach(f,function(e){if(a.isString(e)&&"#"===e[0]){var f=m(e),g=c[d][f];g&&(b[d][f]=g,l(b,c,d,f))}})}function m(a){return a?a.replace("#",""):""}function n(a){var b=[];return a.structure?b=b.concat(a.structure):a.children?b=b.concat(a.children):a.components&&(b=b.concat(a.components)),b}function o(b,c,e,f,h){if(b&&b.length>0)for(var i=d.isOpen("partialProperties"),j=d.isOpen("partialDesigns"),k=0;k<b.length;k++){var l=b[k];i&&l.propertyQuery&&g(l,h)&&(c=a.merge(c,f.component_properties[l.propertyQuery])),j&&l.designQuery&&g(l,h)&&(e=a.merge(e,f.design_data[m(l.designQuery)]))}}function p(c,d,e){var f=u(c,e,d),g=b.objectUtils.cloneDeep(a.omit(c,"structure","data"));return g.structure=j(f,c.structure,e),g.data=k(c.structure,f,c.data),g}function q(b,c,d){c=c||{};var e={};return a.forEach(b,function(a,b){e[b]=p(a,c,d)}),e}function r(b){return!a.isUndefined(b.structure)}function s(b){return"Document"===a.get(b,"type")}function t(b){return!a.isUndefined(b.componentType)}function u(b,c,d){var e=b.structure.id,g=f(d,e);return b?a.assign({},g,v(c,g,b.structure)):{}}function v(d,e,f){var g=a.get(f,"modes.definitions"),h=c.getActiveComponentModeIds(e,g),i=b.dataUtils.getChildrenData(f,d);return a.transform(i,function(b,c){a.assign(b,v(d,e,c))},h)}return{getDisplayedJson:function(a,b,c,d){var e={};if(a)if(t(a)||s(a)){if(!c)throw new Error("Full page is needed to create displayed json for non page component - for default modes collection");var f=u(c,d,b);e.structure=j(f,a,d),e.data=k(a,f,c.data)}else e=r(a)?p(a,b,d):q(a,b,d);return e},applyModesOnSerializedStructure:function(a,b,c){return b=b||{},j(b,a,c)}}}),define("siteUtils/core/positionAndSizeUtils",["lodash","coreUtils","siteUtils/core/layoutUtils"],function(a,b,c){"use strict";function d(d){function e(a,c,d,e){return a.fixedPosition?d.width:b.dockUtils.isHorizontalDockToScreen(a)?Math.max(d.width,e):c.width}function f(a,c,d){return a.fixedPosition||b.dockUtils.isVerticallyDockToScreen(a)?d.height:c.height}function g(a,b,c){var e=a&&a.pct&&a.pct/100*b||0,f=a&&a.px||0,g=a&&a.vw&&a.vw/100*c||0,h=e+f+g;return d?Math.ceil(h):h}function h(a,b,c){var e=a.pct&&a.pct/100*b||0,f=a.px||0,g=a.vh&&a.vh/100*c||0,h=e+f+g;return d?Math.ceil(h):h}function i(a,b,d,f){if(c.isHorizontallyStretched(a)){var h=e(a,b,d,f),i=a.docked,j=g(i.left,h,d.width),k=g(i.right,h,d.width);return h-(j+k)}return a.width}function j(a,b,d,e){if(c.isAspectRatioOn(a))return e=e||i(a,b,d),e*a.aspectRatio;if(c.isVerticallyStretched(a)){var g=f(a,b,d),j=a.docked,k=h(j.top,g,d.height),l=h(j.bottom,g,d.height);return g-(k+l)}return a.height}function k(a,b){return Math.max((a-b)/2,0)}function l(c,d,f,h,j,l){var m=c.docked;if(m){var n=e(c,d,f,j);if(m.left){var o=g(m.left,n,f.width);if(b.dockUtils.isHorizontalDockToScreen(c)){var p=a.isUndefined(l)?k(f.width,j):l;o-=p}return o}if(h=h||i(c,d,f),m.right){var q=g(m.right,n,f.width);return n-(h+q)}if(m.hCenter){var r=g(m.hCenter,n,f.width);return(n-h)/2+r}}return c.x}function m(a,b,c,d){var e=a.docked;if(e){var g=f(a,b,c);if(e.top)return h(e.top,g,c.height);if(d=d||j(a,b,c),e.bottom){var i=h(e.bottom,g,c.height);return g-(d+i)}if(e.vCenter){var k=h(e.vCenter,g,c.height);return(g-d)/2+k}}return a.y}function n(b,c,d,e,f){if(!b.docked&&!b.aspectRatio)return a.pick(b,["x","y","width","height"]);var g=i(b,c,d,e),h=j(b,c,d,g);return{x:l(b,c,d,g,e,f),y:m(b,c,d,h),width:g,height:h}}return{getYInPixels:m,getHeightInPixels:j,getPositionAndSize:n}}var e=d(!1),f=d(!0);return{getYInPixelsRounded:f.getYInPixels,getHeightInPixelsRounded:f.getHeightInPixels,getPositionAndSizeRounded:f.getPositionAndSize,getYInPixels:e.getYInPixels,getHeightInPixels:e.getHeightInPixels,getPositionAndSize:e.getPositionAndSize}}),define("siteUtils/core/structureDimensions",["lodash","siteUtils/core/positionAndSizeUtils"],function(a,b){"use strict";function c(b){var c={};return c[b.id]=a.pick(b.layout,["x","y","width","height"]),c}function d(c,e,f,g,h){var i=e[g],j=c.components||c.children;a.forEach(j,function(a){e[a.id]=b.getPositionAndSize(a.layout,i,f,h),d(a,e,f,c.id,h)})}function e(a,b,e){var f=c(a);return d(a,f,b,a.id,e),f}function f(e,f,g){var h=c(e),i=h[e.id];return a.forEach(e.mobileComponents,function(a){h[a.id]=b.getPositionAndSize(a.layout,i,f,g),d(a,h,f,a.id,g)}),h}function g(a,b,c,d){return d?f(a,b,c):e(a,b,c)}return{createDimensionsMap:g}}),define("siteUtils/core/socialCounterDatabaseAPI",["lodash","coreUtils"],function(a,b){"use strict";var c="likedBlogPosts",d="http://blog-social-counters.wix.com/_api/blog-social-counters/",e={defaultQuerySuccessCallback:function(){},defaultQueryCollectFailureCallback:function(){},getLikesForPostsList:function(a,c,e){var f={postsList:a},g=d+"query-feed/";b.ajaxLibrary.ajax({type:"GET",url:g,crossDomain:!0,data:f,contentType:"application/json",dataType:"json",success:c||this.defaultQuerySuccessCallback,error:e||this.defaultQueryCollectFailureCallback})},getAllCountersForPost:function(a,c,e,f){var g={storeId:a,postId:c},h=d+"query-post/";b.ajaxLibrary.ajax({type:"GET",url:h,crossDomain:!0,data:g,contentType:"application/json",dataType:"json",success:e||this.defaultQuerySuccessCallback,error:f||this.defaultQueryCollectFailureCallback})},updateCounter:function(a,c,e,f,g,h){"like"!==a&&"unlike"!==a||this.toggleUserLike(f);var i={storeId:e.datastoreId,postId:f,counterType:a,counterName:c},j=d+"collector/";b.ajaxLibrary.ajax({url:j,crossDomain:!0,data:i,dataType:"json",contentType:"application/json",success:g||this.defaultQuerySuccessCallback,error:h||this.defaultQueryCollectFailureCallback})},updateCategoryTagSearchesCounter:function(a,b,c){this.updateCounter(a,b,c)},toggleUserLike:function(b){var d=JSON.parse(window.localStorage.getItem(c))||{};d[b]!==!1&&a.has(d,b)?d[b]=!1:d[b]=!0,window.localStorage.setItem(c,JSON.stringify(d))}};return{getAllCountersForPost:e.getAllCountersForPost,updateCounter:e.updateCounter,toggleUserLike:e.toggleUserLike,updateCategoryTagSearchesCounter:e.updateCategoryTagSearchesCounter}}),define("siteUtils/core/socialShareHandler",["lodash","coreUtils","siteUtils/core/socialCounterDatabaseAPI","experiment"],function(a,b,c,d){"use strict";function m(b,c){var d=b.split("#"),e=a.includes(b,"?")?"&":"?";return d[0]+=e+c,d.join("#")}function n(a,b){var c=a,d=c.split("#!");return d.length>1&&(d[1]=decodeURIComponent(d[1]),c=d.join("#!")),b&&(c=c.replace("#!","/#!")),encodeURIComponent(c)}function o(b){return b?encodeURIComponent(a.unescape(b)):""}function p(b){return b?encodeURIComponent(a.unescape(b)):""}function q(a){return a?(a=a.replace(/#/g,encodeURIComponent("#"))," "+a):""}function r(a,c){var d=a||"";return a&&!b.urlUtils.isExternalUrl(a)&&(d=c.getMediaFullStaticUrl(a)),d=encodeURIComponent(d)}function s(a){var b=e;return b+=n(a.url)}function t(a,b){var c=f;return c+=n(a.url),c+="&Title="+o(a.title),c+="&ImageURL="+r(a.imageUrl,b)}function u(a,b){var c=g;return c+=n(a.url),c+="&media="+r(a.imageUrl,b),c+="&description="+o(a.title)}function v(a){var b=h;return b+=n(a.url),b+="&text="+o(a.title)+q(a.hashTags)+encodeURIComponent("\n")}function w(a){var b=i;return b+=n(a.url),b+="&title="+o(a.title),b+="&description="+p(a.description)}function x(a){var b=j;return b+=o(a.title),b+=" - "+n(a.url)}function y(a){var b=l;return b+=n(a.url),b+="&title="+o(a.title)}function z(a){var b="mailto:?";return b+="&subject="+o(a.title),b+="&body="+p(a.description)}function A(a,b){var c={google:s,fancy:t,pinterest:u,twitter:v,facebook:w,whatsapp:x,email:z,linkedin:y};return c[a.service](a,b)||""}function B(a,b){var e=A(a,b.getSiteData());return a.addDeepLinkParam&&(e=m(e,"deeplink_referrer=socialB_"+a.service)),"email"===a.service?void(window.location.href=e):(d.isOpen("sv_blogNotifySocialCounters")&&c.updateCounter("shares",a.service,a.storeId,a.postId),void b.openPopup(e,"wixapps_share","width=635,height=346,scrollbars=no,status=no,toolbar=no,menubar=no,location=no"))}function C(a,c,d,e){b.ajaxLibrary.ajax({url:k,type:"POST",contentType:"application/json",data:'{"longUrl": "'+a+'"}',timeout:c||0,async:!1,success:function(a){d(a.id)},error:e})}var e="https://plus.google.com/share?url=",f="http://www.fancy.com/fancyit/fancy?ItemURL=",g="http://pinterest.com/pin/create/button/?url=",h="https://twitter.com/intent/tweet?url=",i="http://www.facebook.com/sharer.php?u=",j="whatsapp://send?text=",k="https://www.googleapis.com/urlshortener/v1/url?key=AIzaSyDjvIfgLnQJsOxcV01kJae48WSynmXmZ2I",l="https://www.linkedin.com/shareArticle?mini=true&url=";
return{handleShareRequest:B,shortenURL:C}}),define("siteUtils/core/componentVisibility",["lodash"],function(a){"use strict";function c(a){b.push(a)}function d(c){return a.every(b,function(a){return a(c)})}var b=[];return{isComponentVisible:d,registerPlugin:c}}),define("siteUtils/core/compAlignmentUtils",[],function(){"use strict";var a={LEFT:"left",CENTER:"center",RIGHT:"right"},b={TOP:"top",CENTER:"center",BOTTOM:"bottom"};return{getLeft:function(b,c,d,e){var f,g=Math.min(e,d),h=(d-e)/2;switch(b.horizontalAlignment){case a.LEFT:f=-Math.max(0,h),f+=b.horizontalOffset;break;case a.RIGHT:f=g-c+Math.max(0,h),f-=b.horizontalOffset;break;case a.CENTER:f=(g-c)/2,f+=b.horizontalOffset}return f},getTop:function(a,c,d){var e,f=d-c;switch(a.verticalAlignment){case b.TOP:e=a.verticalOffset;break;case b.BOTTOM:e=Math.max(f-a.verticalOffset,0);break;case b.CENTER:e=Math.max(f/2,0),e+=a.verticalOffset}return e}}}),define("siteUtils",["siteUtils/utils/mobileUtils","siteUtils/core/MobileDeviceAnalyzer","siteUtils/core/browserDetection","siteUtils/core/SiteData","siteUtils/core/pageRequests","siteUtils/core/componentsAnchorsMetaData","siteUtils/core/layoutAnchorsUtils","siteUtils/core/originalValuesMapGenerator","siteUtils/core/constants","siteUtils/core/fullToDisplayedJson","siteUtils/core/modesUtils","siteUtils/core/linkRenderer","siteUtils/core/menuUtils","siteUtils/core/layoutUtils","siteUtils/core/positionAndSizeUtils","siteUtils/core/structureDimensions","siteUtils/core/socialShareHandler","siteUtils/core/socialCounterDatabaseAPI","siteUtils/core/componentVisibility","siteUtils/core/compAlignmentUtils"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){"use strict";var u={mobileUtils:a,MobileDeviceAnalyzer:b,browserDetection:c,SiteData:d,pageRequests:e,componentsAnchorsMetaData:f,layoutAnchors:g,originalValuesMapGenerator:h,constants:i,fullToDisplayedJson:j,modes:k,linkRenderer:l,menuUtils:m,layout:n,positionAndSize:o,structureDimensions:p,socialShareHandler:q,socialCounterDatabaseAPI:r,componentVisibility:{isComponentVisible:s.isComponentVisible,registerPlugin:s.registerPlugin},compAlignmentUtils:t};return u});